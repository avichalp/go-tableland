# goreleaser.yml

before:
  hooks:
  - go mod tidy

project_name: api

builds:
- binary: api
  id: api
  main: ./cmd/api
  goos:
    - linux
    - darwin    
  goarch:
    - amd64
    - arm64
  ignore:
    - goos: linux
      goarch: arm64
  env:
    - CGO_ENABLED=1
  ldflags: -s -w
- binary: api-win
  id: api-win
  main: ./cmd/api
  goos:    
    - windows
  goarch:
    - amd64    
  env:
    - CGO_ENABLED=1
  ldflags: -s -w
  
archives:
  - id: api-archive
    format: tar.gz
    builds:
      - api
    name_template: "{{ .ProjectName }}-{{ .Os }}-{{ .Arch }}"
  - id: api-archive-win
    format: zip
    builds:
      - api-win
    name_template: "{{ .ProjectName }}-{{ .Os }}-{{ .Arch }}"  

checksum:
  disable: true